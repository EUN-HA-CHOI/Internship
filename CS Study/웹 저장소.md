## 웹저장소
### 브라우저 저장소
브라우저 저장소의 종류는 cookie, webstorage 두 가지로 나뉜다.
webstorage 는 localStorage 와 SessionStorage 로 이루어져 있다.

### cookie 와 web storage 의 차이
우선 web storage 는 html5 에 포함되어 있는 스펙으로 웹의 데이터를 클라이언트에 저장할 수 있는 새로운 자료구조이다. 기존의 저장소
로 사용되었던 cookie의 몇 가지 단점을 개선한 스펙이다.
web storage 는 key-value 쌍의 구조로 데이터를 저장하고 key 를 기반으로 데이터를 조회할 수 있다.

그리고 local storage 와 session storage 로 구성되어 있다.

아래는 cookie 와 web storage 의 차이이다.

- 웹 사이트에서 cookie 를 설정하면 이후 모든 요청은 쿠키 정보를 포함하여 서버로 전송된다.
이는 불필요한 트래픽을 발생시킬 수 있다. 반대로 web storage 는 데이터가 클라이언트단에 저장만 되어있을 뿐
서버로의 전송은 이루어지지 않는다.
- 단순한 문자열을 넘어서 web storage는 객체 정보를 저장할 수 있다. 문자열 기반 데이터 이외에 체계적으로 구조화된
객체를 저장할 수 있는 web storage는 개발 편의성적인 측면으로 cookie 보다 편리하다고 할 수 있다.
각 브라우저별로 지원 여부를 확인해야 한다.
- web storage는 용량의 제한이 없다. cookie의 경우에는 한 개의 쿠키당 약 4kb 로 제한되어 있고, 총 개수는
300개, 하나의 도메인당 20개로 제한이 되어있다. web storage 경우에는 이러한 제한이 없다.
- 쿠키는 만료일자를 설정하지 않으면 세션쿠키, 설정하면 지속적쿠키로 간주된다. 세션쿠키의 경우 메모리에 저장이 되어
브라우저나, 탭이 닫히면 삭제된다. 반대로 지속적쿠키의 경우 디스크에 저장되어 임의로 삭제하거나, 만료일이 도래하기 전까지
는 데이터가 저장된다. web storage 의 경우에는 만료 기간의 설정이 없다.
web storage 가 매번 서버로 전송하지 않는 특징은 꽤 유용하다.

<hr>

### Local Storage 와 Session Storage의 차이.
web storage 의 두 가지 저장소를 비교하겠다. 기본적으로 web storage는 cookie 와 마찬가지로 도메인 단위로 데이터를 구성한다. 이는 a
라는 도메인의 데이터를 b도메인에서 사용할 수 없다는 뜻이며 보안적인 측면에서 당연하다.

- local storage
저장한 데이터를 지우지 않는 한 영구적으로 보관이 가능하다. 도메인 별로 local storage 가 생성되고, window 전역 객체의 local storage
컬렉션을 통하여 저장과 조회가 이루어진다.
- session storage
session storage 의 경우에는 데이터의 지속성과 액세스 범위에 제한이 있다.
window 전역 객체의 session storage 라는 컬렉션을 통하여 저장과 조회가 이루어진다.

### 차이점
1. 데이터 유지
local storage 의 경우 영구적으로 보관이 가능한 반면, session storage 의 경우에는 세션쿠키와 성질이
비슷하다. 즉 브라우저가 열려있는 동안에는 페이지를 reload 해도 유지가 되며 브라우저가 종료되면 데이터는 삭제된다.

2. 데이터 범위
session storage 의 경우 web storage 의 한 종류이기에 도메인 별로 생성되는 것이 당연하다.
하지만 추가적으로 같은 사이트의 같은 도메인이라 해도 브라우저가 다르면 서로 다른 저장소를 생성한다.
session storage 는 브라우징 되고 있는 브라우저 컨텍스트 내에서 생성되고 유지되기 때문이다.
즉, 택 브라우징이나 다른 브라우저를 실행하여 같은 도메인으로 접속하였을 때, 이 두 페이지의 session storage 는 별개의 영역으로 서로 참조하거나 침범할 수 없다는 뜻이다. 이는 도메인만 같으면 전역적으로 공유가 가능한
local storage 와 구분되는 큰 특징이다. 

### 요약.
- 웹에서 데이터를 클라이언트에 저장할 수 있는 방법은 Cookie와 Web Storage가 있다.
- Cookie는 생성된 이후부터 모든 웹 요청의 헤더에 담겨 서버로 전송된다.
왜 매번 전송? : HTTP의 stateless 때문(통신이 끝나면 상태 정보를 저장하지 않는 무 상태성 때문에 정보 저장 및 사용자를 식별하기
위해서는 매번 전송해야 함 )
- Cookie는 만료일의 설정 여부에 따라 지속적 쿠키, 세션 쿠키로 나뉘어 간주된다.
지속적 쿠키의 경우에는 설정된 만료일에 도래하거나, 임의로 삭제해야 데이터가 삭제된다.
세션 쿠키의 경우에는 브라우저를 종료할 경우 삭제된다.
- Web Storage는 HTML5에 포함된 스팩이다.
정보를 서버로 전송하지 않는다.
용량의 제한이 없다.
단순 문자열을 넘어 객체 정보를 저장할 수 있다.
- Web Storage는 Local Storage 와 Session Storage 로 구성되어있다.
Local Storage는 임의로 삭제 하지 않는 한 영구적으로 보관이 가능하다.
Local Storage는 도메인 별로 생성되기 때문에 도메인이 같으면 공유가 가능하다.
Session Storage는 브라우저를 종료하면 삭제된다.
Session Storage는 도메인이 같아도 브라우저가 다르거나, 탭이 다르면 다른 저장소이다. 즉 서로 침범할 수 없다. 

<hr>
### indexedDB
데이터를 저장할 때, 클라이언트 스토리지(브라우저 제공 DB) 를 이용할 수 있다.
클라이언트 스토리지에는 localStorage , cookies , indexedDB 가 존재한다.

- 그런데 localStorage 를 사용하는 이유는?
localStorage 의 경우 적은 양의 데이터를 저장할 때 유용
동기적으로 작동, 오직 문자열 타입의 키&값만을 사용할 수 있다.
그렇기 때문에 JSON.stringify , JSON.parse 와 같은 함수가 꼭 필요하다.

- indexedDB 의 경우
그에 반해 indexedDB 는 많은 양의 구조화된 데이터를 저장할 때 유용하다.
localstorage 와 달리, js 가 인식할 수 있는 자료형과 객체를 저장할 수 있다.
키,값 형태로 데이터가 저장되며 문자열 타입이 아니어도 된다.
특이한 점은 비동기적으로 작동한다는 점이다.

### indexedDB 패턴
- 데이터베이스 열기
- 데이터베이스에 객체 저장소(Object store) 생성하기
- 트랜젝션(Transaction) 시작하기 (데이터 읽기, 쓰기 제거 등 데이터베이스 작업 요청)
- 이벤트 리스너를 사용하여 요청이 완료될때까지 기다리기
- 요청 결과를 가지고 어떤 동작하기
